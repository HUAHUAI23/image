# Database
DATABASE_URL=postgresql://user:password@localhost:5432/dbname

# Authentication
AUTH_SECRET=your-secret-key-change-me

# Environment (optional, defaults to development)
NODE_ENV=development

# Volcengine TOS (Object Storage)
# Note: VOLCENGINE_ENDPOINT should be hostname only (no https://)
VOLCENGINE_ACCESS_KEY=your-access-key
VOLCENGINE_SECRET_KEY=your-secret-key
VOLCENGINE_REGION=cn-beijing
VOLCENGINE_ENDPOINT=tos-cn-beijing.volces.com
VOLCENGINE_BUCKET_NAME=your-bucket-name

# Doubao VLM (Vision Language Model via ARK)
ARK_API_KEY=your-ark-api-key
ARK_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
ARK_MODEL=ep-xxxxx-xxxxx

# Seedream (Image Generation via ARK)
SEEDREAM_API_KEY=your-seedream-api-key
SEEDREAM_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
SEEDREAM_MODEL=ep-xxxxx-xxxxx
# 一个任务同时发送 ai 模型请求的并发数
SEEDREAM_CONCURRENCY=20

# Task Queue Configuration
# Number of tasks that can be processed concurrently
# Adjust based on server resources:
#   - Small server (2 cores, 4GB RAM): 2-3
#   - Medium server (4 cores, 8GB RAM): 5-10
#   - Large server (8+ cores, 16GB+ RAM): 10-20
# Note: Total concurrent API requests = QUEUE_CONCURRENCY × SEEDREAM_CONCURRENCY
QUEUE_CONCURRENCY=5

# ==================== Cron Worker Configuration ====================

# ---------- Task Enqueue Cron ----------
# Polls database for pending tasks and adds them to the processing queue
# Enable/disable task enqueue cron (default: true)
CRON_TASK_ENQUEUE_ENABLED=true
# Cron interval expression (default: */5 * * * * * - every 5 seconds)
# Examples:
#   */5 * * * * *  - Every 5 seconds (default)
#   */10 * * * * * - Every 10 seconds
#   0 * * * * *    - Every 1 minute
CRON_TASK_ENQUEUE_INTERVAL="*/5 * * * * *"
# Number of pending tasks to fetch and enqueue per cycle
# Higher values reduce database query frequency but may cause larger bursts
# Recommended: 10-50 (should be >= QUEUE_CONCURRENCY for optimal throughput)
CRON_TASK_ENQUEUE_BATCH_SIZE=10

# ---------- Task Timeout Recovery Cron ----------
# Resets tasks that have been stuck in 'processing' status for too long
# Enable/disable task timeout recovery cron (default: true)
CRON_TASK_TIMEOUT_ENABLED=true
# Cron interval expression (default: */30 * * * * * - every 30 seconds)
# Examples:
#   */30 * * * * * - Every 30 seconds (default)
#   0 * * * * *    - Every 1 minute
#   0 */5 * * * *  - Every 5 minutes
CRON_TASK_TIMEOUT_INTERVAL="*/30 * * * * *"
# Task timeout in minutes
# Tasks stuck in 'processing' longer than this will be reset to 'pending'
# This is a recovery mechanism for crashed workers or hung tasks
# Adjust based on expected task duration:
#   - Fast tasks (< 5 min): 10-15 minutes
#   - Normal tasks (5-15 min): 30 minutes (default)
#   - Long tasks (> 15 min): 60+ minutes
CRON_TASK_TIMEOUT_MINUTES=30

# ---------- Order Close Cron ----------
# Closes expired payment orders in both WeChat and local database
# Enable/disable order close cron (default: true)
CRON_ORDER_CLOSE_ENABLED=true
# Cron interval expression (default: 0 * * * * * - every 1 minute)
# Examples:
#   0 * * * * *    - Every 1 minute (default)
#   */30 * * * * * - Every 30 seconds
#   0 */5 * * * *  - Every 5 minutes
CRON_ORDER_CLOSE_INTERVAL="0 * * * * *"
# Number of expired orders to process per cycle
# Recommended: 50-100 (higher values for high-volume payment scenarios)
CRON_ORDER_CLOSE_BATCH_SIZE=50

# 新用户免费额度
GIFT_AMOUNT=
# 图片分析费用
ANALYSIS_PRICE=

# WeChat Pay (optional)
WECHAT_PAY_APPID=
WECHAT_PAY_MCHID=
WECHAT_PAY_API_V3_KEY=
WECHAT_PAY_SERIAL_NO=
WECHAT_PAY_PRIVATE_KEY=
WECHAT_PAY_NOTIFY_URL=
WECHAT_PAY_PLATFORM_CERT=
WECHAT_PAY_PLATFORM_CERT_SERIAL_NO=


# Alipay (optional)
ALIPAY_APPID=
ALIPAY_PRIVATE_KEY=
ALIPAY_PUBLIC_KEY=
ALIPAY_NOTIFY_URL=

# 查看 info 及以上（包括 warn、error、fatal）
# LOG_LEVEL=info
# 只查看 warn 及以上（不包括 info）
LOG_LEVEL=warn


# Optional: Skip env validation during build (CI/CD)
# SKIP_ENV_VALIDATION=1
